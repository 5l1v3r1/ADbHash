<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- Reference.qdoc -->
  <title>Reference Class | ADbHash 1.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
  <div class="main">
    <div class="main-rounded">
      <div class="navigationbar">
        <table><tr>
<td ><a href="adbhash-module.html">ADbHash</a></td><td ><a href="adb.html">adb Namespace</a></td><td >Reference</td>        </tr></table>
      </div>
    </div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Reference Class</h1>
<span class="small-subtitle">(<a href="adb-reference.html">adb::Reference</a>)<br/></span>
<!-- $$$Reference-brief -->
<p>The <a href="adb-reference.html">Reference</a>&lt;T, Data&gt; class provides custom reference wrapper. <a href="#details">More...</a></p>
<!-- @@@Reference -->
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign">   <span class="preprocessor">#include &lt;Reference&gt;</span>
</td></tr></table></div><ul>
<li><a href="adb-reference-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-functions"></a>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="adb-reference.html#Reference">Reference</a></b>(Data &amp;<i>data</i>, int64_t <i>index</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> T </td><td class="memItemRight bottomAlign"><b><a href="adb-reference.html#operator-T">operator T</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Reference&lt;T, Data&gt; &amp;</td><td class="memItemRight bottomAlign"><b><a href="adb-reference.html#operator-eq">operator=</a></b>(T <i>value</i>)</td></tr>
</table></div>
<a name="details"></a>
<!-- $$$Reference-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>The <a href="adb-reference.html">Reference</a>&lt;T, Data&gt; class provides custom reference wrapper.</p>
<p>It facilitates <a href="adb-reference.html#operator-eq">operator=</a>() for values that cannot rely on standard references (e.g&#x2e; values stored in a file). It requires type <code>Data</code> to implement following methods:</p>
<ul>
<li><code>void setValue(int64_t index, T)</code></li>
<li><code>T value(int64_t index) const</code></li>
</ul>
<p>Example of creating a <code>Data</code> type and instantiating <a href="adb-reference.html">Reference</a> pointing to data stored in a file:</p>
<pre class="cpp">

  <span class="keyword">struct</span> FileData
  {
      std<span class="operator">::</span>fstream file <span class="operator">=</span> std<span class="operator">::</span>fstream(<span class="string">&quot;filename&quot;</span><span class="operator">,</span> s<span class="operator">.</span>in <span class="operator">|</span> s<span class="operator">.</span>out);

      <span class="type">void</span> setValue(int64_t index<span class="operator">,</span> <span class="type">int</span> value)
      {
          file<span class="operator">.</span>seekg(index);
          file <span class="operator">&lt;</span><span class="operator">&lt;</span> value;
      }
      <span class="type">int</span> value(int64_t index) <span class="keyword">const</span>
      {
          <span class="type">int</span> v <span class="operator">=</span> <span class="number">0</span>;
          file<span class="operator">.</span>seekg(index);
          file <span class="operator">&gt;</span><span class="operator">&gt;</span> v;
          <span class="keyword">return</span> v;
      }
  };

  FileData data;
  adb<span class="operator">::</span>Refererence<span class="operator">&lt;</span><span class="type">int</span><span class="operator">,</span> FileData<span class="operator">&gt;</span> ref(data<span class="operator">,</span> <span class="number">8</span>);
  ref <span class="operator">=</span> <span class="number">10</span>; <span class="comment">//writes 10 to file at position 8</span>
  <span class="type">int</span> i <span class="operator">=</span> ref; <span class="comment">//reads 10 from file at poition 8</span>

</pre>
<p>In the example we create a struct that knows how to write and retrieve data from/to file and then instantiating the <a href="adb-reference.html">Reference</a> object with the data struct's object and desired index. When <a href="adb-reference.html#operator-eq">operator=</a>() is called the value passed is written to the file. When assigned to <code>T</code> the Reference is implicitely converted to <code>T</code>.</p>
<p>It is used in <a href="adb-hash.html">adb::Hash</a> to allow custom underlying <code>Data</code> storage types (like a file) while retaining some of the convenience of reference semantics such as <code>operator[]</code>.</p>
</div>
<!-- @@@Reference -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$Reference[overload1]$$$ReferenceData&int64_t -->
<h3 class="fn" id="Reference"><a name="Reference"></a>Reference::<span class="name">Reference</span>(<span class="type"><a href="adb-data.html">Data</a></span> &amp;<i>data</i>, <span class="type">int64_t</span> <i>index</i>)</h3>
<p>Constructs <a href="adb-reference.html">Reference</a> with <i>data</i> and <i>index</i>.</p>
<!-- @@@Reference -->
<!-- $$$operator T[overload1]$$$operator T -->
<h3 class="fn" id="operator-T"><a name="operator-T"></a><span class="type">T</span> Reference::<span class="name">operator T</span>() const</h3>
<p>Implicitely converts the <a href="adb-reference.html">Reference</a> object to <code>T</code> by returning <code>Data::value()</code>.</p>
<!-- @@@operator T -->
<!-- $$$operator=[overload1]$$$operator=T -->
<h3 class="fn" id="operator-eq"><a name="operator-eq"></a><span class="type"><a href="adb-reference.html#Reference">Reference</a></span>&lt;<span class="type">T</span>, <span class="type"><a href="adb-data.html">Data</a></span>&gt; &amp;Reference::<span class="name">operator=</span>(<span class="type">T</span> <i>value</i>)</h3>
<p>Assigns <i>value</i> to the underlying <code>Data</code> by calling <code>Data::setValue()</code>.</p>
<!-- @@@operator= -->
</div>
<hr><p>Â© 2018 <a href="https://github.com/Resurr3ction">Michael Vlach</a><p/></body>
</html>
